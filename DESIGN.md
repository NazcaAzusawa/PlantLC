# ゲームシステム設計

## 概要

魔法植物管理シミュレーションゲーム。プレイヤーは管理人として、様々な植物を管理し、エッセンスを採取して収益を得ます。

## コアコンセプト

### 複雑な管理システム
各植物は独自の管理要件を持ち、適切な管理を行わないと爆発などのリスクが発生します。単純な「良い/悪い」ではなく、状況に応じた複雑な判定を行います。

### 情報の段階的開示
管理方法は購入によって段階的に開示され、プレイヤーは試行錯誤しながら最適な管理方法を見つけます。

### リスクとリターンのバランス
管理を怠ると大きなペナルティが発生しますが、適切な管理により大量のエッセンスを獲得できます。

### 動的な管理要求（放置の阻止）
本作の核心的なジレンマは、植物が増えるほどプレイヤーの限られた管理リソース（注意力・時間）が奪い合いになる点にあります。各植物は、プレイヤーによる能動的かつ継続的な介入（管理操作）を要求する設計とし、放置によるリスクや、操作によるリターンを明確にします。

## ゲームの基本ルール

### 1日の流れ
- 1日 = 60秒（ゲーム内表現 6.0時間）
- 1秒ごとに0.1時間減少
- タイマーが0になるとデイ終了
- デイ終了時にリザルト画面が表示され、新しい植物を追加できる

### 管理操作
- **灌水**: 水やり回数を増やす
- **施肥**: 緑/紫/橙の3色から選択、1日1回のみ
- **光量調整**: スライダーで0-100の範囲で調整
- **温度調整**: 1-5の5段階から選択
- **採取**: 1日1回のみ、エッセンスを獲得

### エッセンス計算
- 各植物は独自の点数計算ロジックを持つ
- 光量、温度、灌水、肥料などのパラメータからスコアを計算
- スコアからエッセンス量を算出

### 植物の特殊能力
各植物は独自の特殊能力を持ちます。詳細は `PLANTS.md` を参照してください。

## 管理方法システム

### 購入システム
- 管理方法は1から順に購入可能
- 前の管理方法を購入しないと次の管理方法は無効化
- 購入後は即座に内容を表示
- ゲーム中に下スワイプ（↓キー）で開く

### 管理方法ID形式

管理方法のIDは`{plantId}-{number}`形式で統一されています（例: `'kocho-1'`, `'side-1'`, `'rezo-1'`）。これにより、26個を超える植物にも対応できます。

### 画面遷移
- 左右スワイプで植物を切り替え
- 一定速度以上のスワイプのみ処理
- モニター切り替えはアニメーション付き

## 特殊システム

### プレースホルダー置換システム

一部の植物の管理方法には、動的な値を埋め込むプレースホルダーを使用できます：

- **レゾナントリリィ**: `${LIGHT}`, `${TEMP}`, `${WATER}`, `${FERTILIZER}` - 正解パラメータを埋め込み
- **トリビュソス**: `${OPTIMAL_TEMP}` - 最適温度を埋め込み（更新可能）

### 専用ゴールドシステム（クリュソボロス）

クリュソボロスから得られたエッセンスは専用ゴールドとして扱われます。専用ゴールドはクリュソボロスの管理方法購入にのみ使用できますが、通常ゴールドとしても使用可能です。表示上は合算して表示されます。

### 漢字変換システム（バベル）

バベルを採取した次の一日は、すべての管理方法の漢字が文字化け風の漢字に置き換わって表示されます。プレースホルダー置換後の値も変換対象となります。

### 動的最適温度システム（トリビュソス）

トリビュソスの最適温度は1時間ごとにランダムに変更されますが、表示用温度は更新ボタンを押すまで変更されません。管理方法3（tribu-3）を購入すると、最適温度情報を更新するボタンが表示されます。

### 施設全体への影響システム（コキュートス）

コキュートスが未採取の場合、施設全体の植物の温度レベルが内部処理として1低下します。表示上の温度レベルは変わりませんが、エッセンス計算には低下後の温度が使用されます。

## 将来の拡張

- **植物の追加**: 各植物は専用のJSファイルで管理（`plants/[plantId].js`）
- **より複雑な管理システム**: 複数の特殊判定の組み合わせ、時系列による管理
- **植物間の相互作用**: 複数の植物が影響し合うシステム（コキュートスの温度低下効果など）
- **エッセンスの使用**: 植物の追加費用、設備の購入、管理人スキルの向上など
